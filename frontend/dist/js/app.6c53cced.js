(function(e){function t(t){for(var n,s,c=t[0],i=t[1],u=t[2],p=0,f=[];p<c.length;p++)s=c[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&f.push(o[s][0]),o[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,c=1;c<r.length;c++){var i=r[c];0!==o[i]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={app:0},a=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=i;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"130f":function(e,t,r){"use strict";r("4749")},"1cd3":function(e,t,r){},4749:function(e,t,r){},"49c5":function(e,t,r){},"4df6":function(e,t,r){"use strict";r("1cd3")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{margin:"0px"},attrs:{id:"app"}},[r("Navbar"),r("router-view")],1)},a=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-navbar",{staticClass:"nav-background",attrs:{toggleable:"lg",type:"dark"}},[r("b-navbar-brand",{attrs:{href:"#"}},[e._v("Books Books Books")]),r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",[r("b-nav-item",{attrs:{to:"/"}},[e._v("Home")]),null!==e.logged_user?r("b-nav-item",{attrs:{to:"/user/cart"}},[e._v("Cart ðŸ›’")]):r("b-nav-item",{attrs:{disabled:""}},[e._v("Cart ðŸ›’")])],1),r("b-navbar-nav",{staticClass:"ml-auto",on:{submit:e.search_books}},[r("b-nav-form",[r("b-form-input",{staticClass:"mr-sm-2",attrs:{size:"sm",placeholder:"Search"},model:{value:e.form.search,callback:function(t){e.$set(e.form,"search",t)},expression:"form.search"}}),r("b-button",{staticClass:"my-2 my-sm-0",attrs:{size:"sm",type:"submit"}},[e._v("Search")])],1),r("b-nav-item-dropdown",{attrs:{text:"Category",right:""}},[r("b-dropdown-item",{on:{click:function(t){return e.filter_books("")}}},[e._v("Sve")]),e._l(e.categories,(function(t){return r("div",{key:t.id},[r("b-dropdown-item",{on:{click:function(r){return e.filter_books(t)}}},[e._v(e._s(t))])],1)}))],2),null===e.logged_user?r("b-nav-item",{attrs:{to:"/user/login"}},[e._v("Login")]):r("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[r("em",[e._v(e._s(e.logged_user.username))])]},proxy:!0}])},[r("b-dropdown-item",{on:{click:function(t){return e.logout()}}},[e._v("Log Out")])],1)],1)],1)],1),e.error?r("p",[e._v(e._s(e.error))]):e._e()],1)},c=[],i=(r("ac1f"),r("841c"),r("96cf"),r("1da1")),u=(r("d3b7"),r("d4ec")),l=r("bee2"),p=r("bc3a"),f=r.n(p),d="http://localhost:3000/api/books",b=function(){function e(){Object(u["a"])(this,e)}return Object(l["a"])(e,null,[{key:"get_books",value:function(e){return new Promise(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r,n){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.get(d+e);case 3:o=t.sent,a=o.data,r(a),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),n(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}())}}]),e}(),m=b,v={name:"Navbar",data:function(){return{logged_user:null,categories:[],form:{serach:""},error:""}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.logged_user=e.$cookies.get("user"),t.prev=1,t.next=4,m.get_books("/categories");case 4:e.categories=t.sent,e.$eventBus.$on("logged",(function(){e.logged_user=e.$cookies.get("user")})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.error=t.t0.message;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},methods:{filter_books:function(e){this.$eventBus.$emit("filter-books","?category="+e)},search_books:function(e){e.preventDefault(),this.$eventBus.$emit("filter-books","?title="+this.form.search)},logout:function(){this.$cookies.remove("user"),this.logged_user=null;try{this.$router.push("/")}catch(e){return}}}},h=v,k=(r("a954"),r("2877")),g=Object(k["a"])(h,s,c,!1,null,"54b83474",null),_=g.exports,w={name:"app",components:{Navbar:_}},y=w,x=(r("034f"),Object(k["a"])(y,o,a,!1,null,null,null)),$=x.exports,O=r("5f5b"),j=(r("f9e3"),r("2dd8"),r("8c4f")),R=r("2b27"),S=r.n(R),C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"home"}},[e.error?r("p",[e._v(e._s(e.error))]):e._e(),0==e.books.length?r("p",{staticStyle:{"padding-top":"2%"}},[r("b",[e._v("No results found.")])]):e._e(),r("Books",{attrs:{books:e.books}})],1)},E=[],B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{display:"flex","flex-wrap":"wrap",padding:"50px"}},e._l(e.books,(function(t){return r("div",{key:t._id},[r("BookItem",{attrs:{book:t},on:{"cart-book":function(r){return e.$emit("cart-book",t._id)}}})],1)})),0)])},P=[],q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"193px",height:"auto"}},[r("div",{staticClass:"container",staticStyle:{position:"relative"}},[r("router-link",{attrs:{to:"/books/"+e.book._id,tag:"img",src:"/book_covers/"+e.book.book_cover}}),r("div",{staticClass:"topright"},[r("button",{staticClass:"btn",attrs:{to:"/user/cart"},on:{click:e.cart_book}},[e._v("ðŸ›’")])])],1),r("router-link",{attrs:{to:"/books/"+e.book._id,id:"info",tag:"div"}},[r("h5",[e._v(e._s(e.book.title))]),r("p",[e._v("~ "+e._s(e.book.author)+" ~")])])],1)},D=[],L="http://localhost:3000/api/user",N="http://localhost:3000/api/history",M=function(){function e(){Object(u["a"])(this,e)}return Object(l["a"])(e,null,[{key:"login",value:function(e,t){return new Promise(function(){var r=Object(i["a"])(regeneratorRuntime.mark((function r(n,o){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f.a.post(L+"/login",{username:e,password:t});case 3:a=r.sent,n(a.data),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),o(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"register",value:function(e,t){return new Promise(function(){var r=Object(i["a"])(regeneratorRuntime.mark((function r(n,o){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f.a.post(L+"/register",{username:e,password:t});case 3:a=r.sent,n(a.data),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),o(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"add_to_cart",value:function(e,t){return new Promise(function(){var r=Object(i["a"])(regeneratorRuntime.mark((function r(n,o){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f.a.post(L+"/cart",{user_id:e,book_id:t});case 3:a=r.sent,n(a.data),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),o(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"get_cart",value:function(e){return new Promise(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r,n){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.get(L+"/cart/"+e);case 3:o=t.sent,a=o.data,r(a),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),n(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}())}},{key:"make_purchase",value:function(e,t){return new Promise(function(){var r=Object(i["a"])(regeneratorRuntime.mark((function r(n,o){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f.a.post(N+"/purchase",{book_title:t,user_name:e,purchase_date:new Date});case 3:a=r.sent,n(a.data),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),o(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t){return r.apply(this,arguments)}}())}}]),e}(),I=M,T={name:"BookItem",props:["book"],data:function(){return{error:""}},methods:{cart_book:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r=e.$cookies.get("user"),!r){t.next=7;break}return t.next=5,I.add_to_cart(r.id,e.book._id);case 5:t.next=8;break;case 7:e.$router.push("/user/login");case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.error=t.t0.message;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}},z=T,A=(r("4df6"),Object(k["a"])(z,q,D,!1,null,"2a8db2be",null)),J=A.exports,H={name:"Books",components:{BookItem:J},props:["books"]},K=H,W=Object(k["a"])(K,B,P,!1,null,"39fc0258",null),F=W.exports,G={name:"home",components:{Books:F},data:function(){return{books:[],error:""}},methods:{load_books:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,m.get_books(e);case 3:t.books=r.sent,r.next=9;break;case 6:r.prev=6,r.t0=r["catch"](0),t.error=r.t0.message;case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()}},created:function(){this.$eventBus.$on("filter-books",this.load_books),this.load_books("")}},Q=G,U=(r("cccb"),Object(k["a"])(Q,C,E,!1,null,null,null)),V=U.exports,X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v(e._s(e.error))]),r("h2",{staticStyle:{color:"white"}},[e._v("Create account")]),r("b-form",{on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[r("b-form-input",{staticClass:"inputs",attrs:{id:"username",required:"",placeholder:"Enter username"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),r("b-form-input",{staticClass:"inputs",attrs:{id:"password",required:"",placeholder:"Enter password",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),r("b-form-input",{staticClass:"inputs",attrs:{id:"confirm_password",required:"",placeholder:"Confirm password",type:"password"},model:{value:e.form.confirm_password,callback:function(t){e.$set(e.form,"confirm_password",t)},expression:"form.confirm_password"}}),r("b-button",{staticStyle:{float:"right"},attrs:{type:"submit",variant:"primary"}},[e._v("Register")])],1),r("p",{staticStyle:{float:"left",color:"grey"}},[e._v("Already have an account? "),r("b-link",{attrs:{to:"/user/login"}},[e._v("Login here")]),e._v(".")],1)],1)},Y=[],Z={name:"register",data:function(){return{error:"",showError:!1,form:{username:"",password:"",confirm_password:""}}},methods:{register:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.form.password===e.form.confirm_password){t.next=5;break}return e.error="Passwords do not match.",e.showError=!0,t.abrupt("return");case 5:return t.next=7,I.register(e.form.username,e.form.password);case 7:r=t.sent,e.$cookies.set("user",{username:r.username,id:r._id}),e.$eventBus.$emit("logged"),e.$router.push("/"),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),e.error="Error creating user.",e.showError=!0;case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()}}},ee=Z,te=(r("edd2"),Object(k["a"])(ee,X,Y,!1,null,"044653a9",null)),re=te.exports,ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v(e._s(e.error))]),r("h2",{staticStyle:{color:"white"}},[e._v("Login")]),r("b-form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[r("b-form-input",{staticClass:"inputs",attrs:{id:"username",required:"",placeholder:"Enter username"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),r("b-form-input",{staticClass:"inputs",attrs:{id:"password",required:"",placeholder:"Enter password",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),r("b-button",{staticStyle:{float:"right"},attrs:{type:"submit",variant:"primary"}},[e._v("Login")])],1),r("p",{staticStyle:{float:"left",color:"grey"}},[e._v("Don't have an account? "),r("b-link",{attrs:{to:"/user/register"}},[e._v("Register here")]),e._v(".")],1)],1)},oe=[],ae={name:"login",data:function(){return{error:"",showError:!1,form:{username:"",password:""}}},methods:{login:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.login(e.form.username,e.form.password);case 3:r=t.sent,e.$cookies.set("user",{username:r.username,id:r._id}),e.$eventBus.$emit("logged"),e.$router.push("/"),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),e.error="Wrong credentials.",e.showError=!0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},se=ae,ce=(r("130f"),Object(k["a"])(se,ne,oe,!1,null,"62f1156a",null)),ie=ce.exports,ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"container"}},[e._l(e.books,(function(t){return r("div",{key:t._id,staticClass:"item"},[r("router-link",{staticStyle:{width:"100px",height:"157%",float:"left"},attrs:{to:"/books/"+t._id,tag:"img",src:"/book_covers/"+t.book_cover}}),r("h4",{staticStyle:{"padding-left":"50%","padding-top":"5%"}},[e._v(e._s(t.title))])],1)})),r("button",{on:{click:e.add_history}},[e._v("Purchase")])],2)},le=[],pe={name:"cart",data:function(){return{books:[]}},methods:{load_cart:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$cookies.get("user"),!r){t.next=11;break}return t.prev=2,t.next=5,I.get_cart(r.id);case 5:e.books=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),t.t0;case 11:case"end":return t.stop()}}),t,null,[[2,8]])})))()},add_history:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$cookies.get("user"),!r){t.next=15;break}t.prev=2,n=0;case 4:if(!(n<e.books.length)){t.next=10;break}return t.next=7,I.make_purchase(r.username,e.books[n].title);case 7:n++,t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))()}},created:function(){this.load_cart()}},fe=pe,de=(r("58cc"),Object(k["a"])(fe,ue,le,!1,null,"6c500d4a",null)),be=de.exports,me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"book_info"}},[r("img",{attrs:{id:"book_cover",src:"/book_covers/"+e.book.book_cover}}),r("div",{attrs:{id:"book_details"}},[r("h3",{staticClass:"info"},[e._v(e._s(e.book.title))]),r("br"),r("br"),r("br"),r("h5",{staticClass:"info"},[e._v("Autor: "),r("span",{staticStyle:{opacity:"0.8"}},[e._v(e._s(e.book.author))])]),r("br"),r("br"),r("h5",{staticClass:"info"},[e._v("Kategorija: "),r("span",{staticStyle:{opacity:"0.7"}},[e._v(e._s(e.book.category))])]),r("br"),r("br"),r("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-2",modifiers:{"collapse-2":!0}}],staticClass:"m-1",staticStyle:{width:"100%"}},[e._v("Opis")]),r("br"),r("br"),r("br"),r("b-collapse",{attrs:{id:"collapse-2"}},[r("b-card",{staticStyle:{"background-color":"#353535"}},[e._v(e._s(e.book.description))])],1),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("hr"),r("h5",{staticClass:"info",staticStyle:{"background-color":"#353535"}},[e._v("Cena: "),r("span",{staticStyle:{opacity:"0.7"}},[e._v(e._s(e.book.price)+".00 rsd")])])],1)])},ve=[],he={name:"BookDetails",data:function(){return{book:void 0,error:""}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.get_books("/"+e.$route.params.book_id);case 3:e.book=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.error=t.t0.message;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},ke=he,ge=(r("6965"),Object(k["a"])(ke,me,ve,!1,null,"36ca78f4",null)),_e=ge.exports,we=[{path:"/:query?",name:"home",component:V},{path:"/user/cart",name:"cart",component:be},{path:"/user/register",name:"register",component:re},{path:"/user/login",name:"login",component:ie},{path:"/books/:book_id",name:"book",component:_e}],ye=we;n["default"].config.productionTip=!1,n["default"].use(O["a"]),n["default"].use(j["a"]),S.a.config("7d"),S.a.set("theme","default"),S.a.set("hover-time","1s"),n["default"].use(S.a);var xe=new j["a"]({mode:"history",routes:ye});n["default"].prototype.$eventBus=new n["default"],new n["default"]({router:xe,render:function(e){return e($)}}).$mount("#app")},"58cc":function(e,t,r){"use strict";r("c599")},"5ced":function(e,t,r){},6965:function(e,t,r){"use strict";r("f7fc")},"85ec":function(e,t,r){},a954:function(e,t,r){"use strict";r("b19f")},b19f:function(e,t,r){},c599:function(e,t,r){},cccb:function(e,t,r){"use strict";r("5ced")},edd2:function(e,t,r){"use strict";r("49c5")},f7fc:function(e,t,r){}});
//# sourceMappingURL=app.6c53cced.js.map